<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>spider-tool: cli.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cli.h File Reference</h1>
<p>Standard Command Line Interface.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="cli_8h_source.html">linkedlist.h</a>&quot;</code><br/>
<code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &lt;netdb.h&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &lt;sys/param.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>

<p><a href="cli_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspd__cli__arg.html">spd_cli_arg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspd__cli__entry.html">spd_cli_entry</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4f3ad5e5686a35a966c8bad5b8694654"></a><!-- doxytag: member="cli.h::CLI_NO_PERMS" ref="a4f3ad5e5686a35a966c8bad5b8694654" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>CLI_NO_PERMS</b>&nbsp;&nbsp;&nbsp;-1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7cc1753a05a0821f6c70dd2bccfbab5c"></a><!-- doxytag: member="cli.h::RESULT_SUCCESS" ref="a7cc1753a05a0821f6c70dd2bccfbab5c" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>RESULT_SUCCESS</b>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a76ed22cec1f42c93a5b4eed8d967338f"></a><!-- doxytag: member="cli.h::RESULT_SHOWUSAGE" ref="a76ed22cec1f42c93a5b4eed8d967338f" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>RESULT_SHOWUSAGE</b>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aea87ce97f86effb2c4df6274d4aac567"></a><!-- doxytag: member="cli.h::RESULT_FAILURE" ref="aea87ce97f86effb2c4df6274d4aac567" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>RESULT_FAILURE</b>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a50989f00b32eeb2516a3803cb2ffb766"></a><!-- doxytag: member="cli.h::CLI_SUCCESS" ref="a50989f00b32eeb2516a3803cb2ffb766" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>CLI_SUCCESS</b>&nbsp;&nbsp;&nbsp;(char *)RESULT_SUCCESS</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0873456096960dab21fff0ce68c95acb"></a><!-- doxytag: member="cli.h::CLI_SHOWUSAGE" ref="a0873456096960dab21fff0ce68c95acb" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>CLI_SHOWUSAGE</b>&nbsp;&nbsp;&nbsp;(char *)RESULT_SHOWUSAGE</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae47751901c430ebb833e59291a5e0b3f"></a><!-- doxytag: member="cli.h::CLI_FAILURE" ref="ae47751901c430ebb833e59291a5e0b3f" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>CLI_FAILURE</b>&nbsp;&nbsp;&nbsp;(char *)RESULT_FAILURE</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af1424ac5021a4530ce69dbe071bee19f"></a><!-- doxytag: member="cli.h::SPD_MAX_CMD_LEN" ref="af1424ac5021a4530ce69dbe071bee19f" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SPD_MAX_CMD_LEN</b>&nbsp;&nbsp;&nbsp;16</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9d8f3d66fcb6d00cbb2b902e0ecd6cbf"></a><!-- doxytag: member="cli.h::SPD_MAX_ARGS" ref="a9d8f3d66fcb6d00cbb2b902e0ecd6cbf" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SPD_MAX_ARGS</b>&nbsp;&nbsp;&nbsp;64</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a90e9d33583b0a3d50b9a195693fe02ca"></a><!-- doxytag: member="cli.h::SPD_CLI_COMPLETE_EOF" ref="a90e9d33583b0a3d50b9a195693fe02ca" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SPD_CLI_COMPLETE_EOF</b>&nbsp;&nbsp;&nbsp;&quot;_EOF_&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cli_8h.html#aa09c07179fe1c89f52bb28bc126d26f2">ESS</a>(x)&nbsp;&nbsp;&nbsp;((x) == 1 ? &quot;&quot; : &quot;s&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6c2daaea0ed11b22f402bbb5ec24e965"></a><!-- doxytag: member="cli.h::SPD_CLI_YESNO" ref="a6c2daaea0ed11b22f402bbb5ec24e965" args="(x)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cli_8h.html#a6c2daaea0ed11b22f402bbb5ec24e965">SPD_CLI_YESNO</a>(x)&nbsp;&nbsp;&nbsp;(x) ? &quot;Yes&quot; : &quot;No&quot;</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return Yes or No depending on the argument. This is used in many places in CLI command, having a function to generate this helps maintaining a consistent output (and possibly emitting the output in other languages, at some point). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6354aff5b075f7ae7114f16a2474850b"></a><!-- doxytag: member="cli.h::SPD_CLI_INOFF" ref="a6354aff5b075f7ae7114f16a2474850b" args="(x)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cli_8h.html#a6354aff5b075f7ae7114f16a2474850b">SPD_CLI_INOFF</a>(x)&nbsp;&nbsp;&nbsp;(x) ? &quot;On&quot; : &quot;Off&quot;</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return On or Off depending on the argument. This is used in many places in CLI command, having a function to generate this helps maintaining a consistent output (and possibly emitting the output in other languages, at some point). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa0c0ca8781aa570fb30c11ee1e2c7aad"></a><!-- doxytag: member="cli.h::SPD_CLI_DEFINE" ref="aa0c0ca8781aa570fb30c11ee1e2c7aad" args="(callback, summar,...)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SPD_CLI_DEFINE</b>(callback, summar,...)&nbsp;&nbsp;&nbsp;{.handler = callback, .summary = summar, ## __VA_ARGS__ }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5489c4051c728121fe836b2f6f61fd09"></a><!-- doxytag: member="cli.h::spd_cli_command" ref="a5489c4051c728121fe836b2f6f61fd09" args="(fd, s)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>spd_cli_command</b>(fd, s)&nbsp;&nbsp;&nbsp;spd_cli_command_full(CLI_NO_PERMS, CLI_NO_PERMS, fd, (s))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8cb1dab397d0ebad280a5390e1d7b8eb"></a><!-- doxytag: member="cli.h::spd_cli_command_multiple" ref="a8cb1dab397d0ebad280a5390e1d7b8eb" args="(fd, size, s)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>spd_cli_command_multiple</b>(fd, size, s)&nbsp;&nbsp;&nbsp;spd_cli_command_multiple_full(CLI_NO_PERMS, CLI_NO_PERMS, fd, size, s)</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><b>spd_cli_command</b> { <b>CLI_USAGE</b>, 
<b>CLI_COMPLETE</b>, 
<b>CLI_HANDLER</b>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cli_8h.html#ae9213078223ba961ffa288851e2611b4">spd_cli_complete</a> (const char *word, const char *const choices[], int state)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cli_8h.html#af8427858cf1a26b7a6bd9b17f3cd807f">spd_command_full</a> (int uid, int gid, int fd, const char *a)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Interprets a command Interpret a command s, sending output to fd if uid:gid has permissions to run this command. uid = CLI_NO_PERMS to avoid checking user permissions gid = CLI_NO_PERMS to avoid checking group permissions.  <a href="#af8427858cf1a26b7a6bd9b17f3cd807f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cli_8h.html#a875db88212938ee6b94b54cc94cf0e91">spd_cli_command_multiple_full</a> (int uid, int gid, int fd, size_t size, const char *s)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Executes multiple CLI commands Interpret strings separated by NULL and execute each one, sending output to fd if uid has permissions, uid = CLI_NO_PERMS to avoid checking users permissions. gid = CLI_NO_PERMS to avoid checking group permissions.  <a href="#a875db88212938ee6b94b54cc94cf0e91"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cli_8h.html#a1f8b3da61ef0b5d9b6c55ab5d19e960a">spd_cli_register</a> (struct <a class="el" href="structspd__cli__entry.html">spd_cli_entry</a> *e)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Registers a command or an array of commands.  <a href="#a1f8b3da61ef0b5d9b6c55ab5d19e960a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cli_8h.html#ade9564322eb63121243c28c2e932788f">spd_cli_register_multiple</a> (struct <a class="el" href="structspd__cli__entry.html">spd_cli_entry</a> *e, int len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register multiple commands.  <a href="#ade9564322eb63121243c28c2e932788f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cli_8h.html#a143a60bddf33a2e7b69c5630d2143e10">spd_cli_unregister</a> (struct <a class="el" href="structspd__cli__entry.html">spd_cli_entry</a> *e)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unregisters a command or an array of commands.  <a href="#a143a60bddf33a2e7b69c5630d2143e10"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cli_8h.html#a34b118fe7b59aa71e15c30911ddece70">spd_cli_unregister_multiple</a> (struct <a class="el" href="structspd__cli__entry.html">spd_cli_entry</a> *e, int len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unregister multiple commands.  <a href="#a34b118fe7b59aa71e15c30911ddece70"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cli_8h.html#a7b7471f08e7f563934d7a26b2ab05c3d">spd_cli_generator</a> (const char *, const char *, int)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Readline madness Useful for readline, that's about it.  <a href="#a7b7471f08e7f563934d7a26b2ab05c3d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a01ac159e5c7854e62f794756fb70a41b"></a><!-- doxytag: member="cli.h::spd_cli_generatornummatches" ref="a01ac159e5c7854e62f794756fb70a41b" args="(const char *, const char *)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>spd_cli_generatornummatches</b> (const char *, const char *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cli_8h.html#abb73af2bf7fc32b38c9be91a0c42f51d">spd_cli_completion_matches</a> (const char *, const char *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generates a NULL-terminated array of strings that 1) begin with the string in the second parameter, and 2) are valid in a command after the string in the first parameter.  <a href="#abb73af2bf7fc32b38c9be91a0c42f51d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8f801fe827f786dfb6a5f1eb26d57e75"></a><!-- doxytag: member="cli.h::spd_cli" ref="a8f801fe827f786dfb6a5f1eb26d57e75" args="(int fd, const char *fmt,...) __attribute__((format(printf" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>spd_cli</b> (int fd, const char *fmt,...) __attribute__((format(printf</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Standard Command Line Interface. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="aa09c07179fe1c89f52bb28bc126d26f2"></a><!-- doxytag: member="cli.h::ESS" ref="aa09c07179fe1c89f52bb28bc126d26f2" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ESS</td>
          <td>(</td>
          <td class="paramtype">x&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((x) == 1 ? &quot;&quot; : &quot;s&quot;)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>In many cases we need to print singular or plural words depending on a count. This macro helps us e.g. printf("we have %d object%s", n, <a class="el" href="cli_8h.html#aa09c07179fe1c89f52bb28bc126d26f2">ESS(n)</a>); </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a875db88212938ee6b94b54cc94cf0e91"></a><!-- doxytag: member="cli.h::spd_cli_command_multiple_full" ref="a875db88212938ee6b94b54cc94cf0e91" args="(int uid, int gid, int fd, size_t size, const char *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spd_cli_command_multiple_full </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>uid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>gid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Executes multiple CLI commands Interpret strings separated by NULL and execute each one, sending output to fd if uid has permissions, uid = CLI_NO_PERMS to avoid checking users permissions. gid = CLI_NO_PERMS to avoid checking group permissions. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>uid</em>&nbsp;</td><td>User ID that is trying to run the command. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gid</em>&nbsp;</td><td>Group ID that is trying to run the command. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fd</em>&nbsp;</td><td>pipe </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>is the total size of the string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>incoming string </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>number</em>&nbsp;</td><td>of commands executed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae9213078223ba961ffa288851e2611b4"></a><!-- doxytag: member="cli.h::spd_cli_complete" ref="ae9213078223ba961ffa288851e2611b4" args="(const char *word, const char *const choices[], int state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* spd_cli_complete </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const &nbsp;</td>
          <td class="paramname"> <em>choices</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>state</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Helper function to generate cli entries from a NULL-terminated array. Returns the n-th matching entry from the array, or NULL if not found. Can be used to implement generate() for static entries as below (in this example we complete the word in position 2): </p>
<div class="fragment"><pre class="fragment">    <span class="keywordtype">char</span> *my_generate(<span class="keyword">const</span> <span class="keywordtype">char</span> *line, <span class="keyword">const</span> <span class="keywordtype">char</span> *word, <span class="keywordtype">int</span> pos, <span class="keywordtype">int</span> n)
    {
        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> choices[] = { <span class="stringliteral">&quot;one&quot;</span>, <span class="stringliteral">&quot;two&quot;</span>, <span class="stringliteral">&quot;three&quot;</span>, NULL };
        <span class="keywordflow">if</span> (pos == 2)
                <span class="keywordflow">return</span> <a class="code" href="cli_8h.html#ae9213078223ba961ffa288851e2611b4">spd_cli_complete</a>(word, choices, n);
        <span class="keywordflow">else</span>
                <span class="keywordflow">return</span> NULL;
    }
</pre></div> 
</div>
</div>
<a class="anchor" id="abb73af2bf7fc32b38c9be91a0c42f51d"></a><!-- doxytag: member="cli.h::spd_cli_completion_matches" ref="abb73af2bf7fc32b38c9be91a0c42f51d" args="(const char *, const char *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char** spd_cli_completion_matches </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generates a NULL-terminated array of strings that 1) begin with the string in the second parameter, and 2) are valid in a command after the string in the first parameter. </p>
<p>The first entry (offset 0) of the result is the longest common substring in the results, useful to extend the string that has been completed. Subsequent entries are all possible values, followed by a NULL. All strings and the array itself are malloc'ed and must be freed by the caller. </p>

</div>
</div>
<a class="anchor" id="a7b7471f08e7f563934d7a26b2ab05c3d"></a><!-- doxytag: member="cli.h::spd_cli_generator" ref="a7b7471f08e7f563934d7a26b2ab05c3d" args="(const char *, const char *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* spd_cli_generator </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Readline madness Useful for readline, that's about it. </p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1f8b3da61ef0b5d9b6c55ab5d19e960a"></a><!-- doxytag: member="cli.h::spd_cli_register" ref="a1f8b3da61ef0b5d9b6c55ab5d19e960a" args="(struct spd_cli_entry *e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spd_cli_register </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structspd__cli__entry.html">spd_cli_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>e</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Registers a command or an array of commands. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>e</em>&nbsp;</td><td>which cli entry to register. Register your own command </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ade9564322eb63121243c28c2e932788f"></a><!-- doxytag: member="cli.h::spd_cli_register_multiple" ref="ade9564322eb63121243c28c2e932788f" args="(struct spd_cli_entry *e, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spd_cli_register_multiple </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structspd__cli__entry.html">spd_cli_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Register multiple commands. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>e</em>&nbsp;</td><td>pointer to first cli entry to register </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>number of entries to register </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a143a60bddf33a2e7b69c5630d2143e10"></a><!-- doxytag: member="cli.h::spd_cli_unregister" ref="a143a60bddf33a2e7b69c5630d2143e10" args="(struct spd_cli_entry *e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spd_cli_unregister </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structspd__cli__entry.html">spd_cli_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>e</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unregisters a command or an array of commands. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>e</em>&nbsp;</td><td>which cli entry to unregister Unregister your own command. You must pass a completed <a class="el" href="structspd__cli__entry.html">spd_cli_entry</a> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 </dd></dl>

</div>
</div>
<a class="anchor" id="a34b118fe7b59aa71e15c30911ddece70"></a><!-- doxytag: member="cli.h::spd_cli_unregister_multiple" ref="a34b118fe7b59aa71e15c30911ddece70" args="(struct spd_cli_entry *e, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spd_cli_unregister_multiple </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structspd__cli__entry.html">spd_cli_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unregister multiple commands. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>e</em>&nbsp;</td><td>pointer to first cli entry to unregister </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>number of entries to unregister </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af8427858cf1a26b7a6bd9b17f3cd807f"></a><!-- doxytag: member="cli.h::spd_command_full" ref="af8427858cf1a26b7a6bd9b17f3cd807f" args="(int uid, int gid, int fd, const char *a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spd_command_full </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>uid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>gid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>a</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Interprets a command Interpret a command s, sending output to fd if uid:gid has permissions to run this command. uid = CLI_NO_PERMS to avoid checking user permissions gid = CLI_NO_PERMS to avoid checking group permissions. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>uid</em>&nbsp;</td><td>User ID that is trying to run the command. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gid</em>&nbsp;</td><td>Group ID that is trying to run the command. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fd</em>&nbsp;</td><td>pipe </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>incoming string </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Wed Jan 18 13:13:30 2012 for spider-tool by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
