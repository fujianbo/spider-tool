<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>spider-tool: spd_str Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>spd_str Struct Reference</h1><!-- doxytag: class="spd_str" -->
<p>The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field to indicate the type of storage. Three special constants indicate malloc, alloca() or static variables, all other values indicate a struct <a class="el" href="structspd__threadprivdata.html" title="data for a thread locally stored variable">spd_threadprivdata</a> pointer.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="str_8h_source.html">str.h</a>&gt;</code></p>

<p><a href="structspd__str-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aec599616e242e3a8d971db93effe3abe"></a><!-- doxytag: member="spd_str::len" ref="aec599616e242e3a8d971db93effe3abe" args="" -->
size_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>len</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a615f55dbf020b304750c4743b9e2e25e"></a><!-- doxytag: member="spd_str::used" ref="a615f55dbf020b304750c4743b9e2e25e" args="" -->
size_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>used</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4a2be06020dc7f20d979e3a9075d6ad6"></a><!-- doxytag: member="spd_str::str_tpv" ref="a4a2be06020dc7f20d979e3a9075d6ad6" args="" -->
struct <a class="el" href="structspd__threadprivdata.html">spd_threadprivdata</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>str_tpv</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2bf4db32e80ff5945af3ce8589959764"></a><!-- doxytag: member="spd_str::buf" ref="a2bf4db32e80ff5945af3ce8589959764" args="[0]" -->
char&nbsp;</td><td class="memItemRight" valign="bottom"><b>buf</b> [0]</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field to indicate the type of storage. Three special constants indicate malloc, alloca() or static variables, all other values indicate a struct <a class="el" href="structspd__threadprivdata.html" title="data for a thread locally stored variable">spd_threadprivdata</a> pointer. </p>
<p>Support for dynamic strings.</p>
<p>A dynamic string is just a C string prefixed by a few control fields that help setting/appending/extending it using a printf-like syntax.</p>
<p>One should never declare a variable with this type, but only a pointer to it, e.g.</p>
<p>struct <a class="el" href="structspd__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed...">spd_str</a> *ds;</p>
<p>The pointer can be initialized with the following:</p>
<p>ds = spd_str_create(init_len); creates a malloc()'ed dynamic string;</p>
<p>ds = spd_str_alloca(init_len); creates a string on the stack (not very dynamic!).</p>
<p>ds = spd_str_thread_get(ts, init_len) creates a malloc()'ed dynamic string associated to the thread-local storage key ts</p>
<p>Finally, the string can be manipulated with the following:</p>
<p>spd_str_set(&amp;buf, max_len, fmt, ...) spd_str_append(&amp;buf, max_len, fmt, ...)</p>
<p>and their varargs variant</p>
<p>spd_str_set_va(&amp;buf, max_len, ap) spd_str_append_va(&amp;buf, max_len, ap)</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>max_len</em>&nbsp;</td><td>The maximum allowed capacity of the <a class="el" href="structspd__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed...">spd_str</a>. Note that if the value of max_len is less than the current capacity of the spds_str (as returned by spd_str_size), then the parameter is effectively ignored. 0 means unlimited, -1 means "at most the available space"</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>All the functions return &lt;0 in case of error, or the length of the string added to the buffer otherwise. Note that in most cases where an error is returned, characters ARE written to the <a class="el" href="structspd__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed...">spd_str</a>. </dd></dl>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="str_8h_source.html">str.h</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Wed Jan 18 13:13:30 2012 for spider-tool by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
